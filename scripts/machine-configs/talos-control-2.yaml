---
kind: Machine
name: 617989ff-3f8d-444b-8fae-395c8048bfe4
patches:
  - idOverride: 400-cm-617989ff-3f8d-444b-8fae-395c8048bfe4-set-hostname-talos-control-2
    annotations:
      name: set-hostname-talos-control-2
    inline:
      machine:
        network:
          hostname: talos-control-2
        nodeLabels:
          management-ip: 192.168.10.101
          node-role: control-plane
          topology.kubernetes.io/zone: proxmox
          topology.proxmox.io/node: hp-server-1
  - idOverride: 401-cm-617989ff-3f8d-444b-8fae-395c8048bfe4-control-plane-config
    annotations:
      name: control-plane-config
    inline:
      cluster:
        proxy:
          disabled: true
      machine:
        features:
          hostDNS:
            enabled: true
            forwardKubeDNSToHost: true
          kubePrism:
            enabled: true
            port: 7445
        kernel:
          modules:
            - name: br_netfilter
              parameters:
                - nf_conntrack_max=131072
        sysctls:
          fs.inotify.max_user_instances: "8192"
          fs.inotify.max_user_watches: "1048576"
        time:
          disabled: false
          servers:
            - time.cloudflare.com
